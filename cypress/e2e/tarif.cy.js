describe('Управление тарифами', () => {
    beforeEach(() => {
        cy.loginStand()
        cy.changeCompanyApi('3448774')
        cy.visit('/')
        cy.openBurgerTab('Управление тарифами').url().should('contain', '/tarif')
    })
    context('Общие кейсы', () => {
        it('Верстка тарифы', () => {
            //СНачала проверяем заголовок
            cy.get('div.page-title__text.title-new').should('contain', ' Обслуживание по тарифу за')//FIXME:Добавить проверку по месяцу
            cy.get('[data-qa="16577869259230"]').should('contain',' Основные параметры ').and('have.css','border-bottom','3px solid #2f54eb')
           
            cy.get('div.arrow-toggle__arrow.red').click()
            
            cy.get('[data-qa="1657785210535"]').should('have.css','background','rgba(222,222,222,0.5)')
            cy.get('.tariff-details-header__title').should('contain', 'Тариф Расчетный')
            cy.get('[data-qa="16577851384090"] > app-tariff-description-item > .card-content-item > .label').should('contain', 'Переводы в другие банки на счета ЮЛ, ИП и ФЛ ')
            cy.get('[data-qa="16577851384090"] > app-tariff-description-item > .card-content-item > .value').should('contain', '25 ₽ за платеж. В адрес ФЛ + доп.комиссия ')
            cy.get('[data-qa="16577851384091"] > app-tariff-description-item > .card-content-item > .label').should('contain', 'Переводы в адрес ФЛ')
            cy.get('[data-qa="16577851384091"] > app-tariff-description-item > .card-content-item > .value').should('contain', 'от 0,2% до 6% от суммы платежа')
            cy.get('[data-qa="16577851384092"] > app-tariff-description-item > .card-content-item > .label').should('contain', 'Снятие наличных с карты')
            cy.get('[data-qa="16577851384092"] > app-tariff-description-item > .card-content-item > .value').should('contain', 'до 100 000 ₽ (включительно) - бесплатно. Далее - 1,5 % ')
            cy.get('[data-qa="16577851384093"] > app-tariff-description-item > .card-content-item > .label').should('contain', 'Начисление % на остаток')
            cy.get('[data-qa="16577851384093"] > app-tariff-description-item > .card-content-item > .value').should('contain', 'не начисляется')
            cy.get('[data-qa="1657785266292"] > .card-content-item > .label').should('contain', 'Тариф действует с')
            cy.get('[data-qa="1657785266292"] > .card-content-item > .value').should('contain', '09.10.2020')
            cy.get('[data-qa="1657785189071"] > .card-content-item > .label').should('contain', 'Плата за ведение расчётного счета')
            cy.get('[data-qa="1657785189071"] > .card-content-item > .value').should('contain', '2 месяца бесплатно, далее 1 900 ₽')
            cy.get('[data-qa="1657787192111"]').should('contain', 'Описание тарифа').should('have.attr', 'href', 'https://metib.online/docs/Единый%20Сборник%20Тарифов%20с%2005.07.2023г.pdf')
            cy.get('[data-qa="1663074395452"] > span').should('contain', 'Сменить').click().then(() => {
                cy.get('.page-title__text').should('contain', 'Тарифы и пакеты')
                cy.get('app-svg-icon[data-qa="1657805226006"]').click()
            })
            cy.get('.tariff-details-container__header-title').should('contain', 'Переводы денежных средств')
            cy.get('[data-qa="16577853554320"] > .tariff-details-item > :nth-child(1) > .tariff-details-item__header').should('contain', 'Счет')
            cy.get('[data-qa="16577853554320"] > .tariff-details-item > :nth-child(1) > .tariff-details-item__header > span').should('have.text', '  Расчетный счет 40802810200990000023 ').and('have.css', 'background-image', 'linear-gradient(270deg, rgb(0, 58, 210) 0%, rgb(0, 58, 210) 100%)')
            cy.get('[data-qa="16577853554320"] > .tariff-details-item > .tariff-details-item__option-wrapper > .tariff-details-item__option-description').should('contain', ' Переводы в другие банки на счета юридических лиц, ИП и ФЛ ')
            cy.get('[data-qa="16577853554320"] > .tariff-details-item > :nth-child(3) > .tariff-details-item__header').should('contain', ' 25 ₽ за платеж ')
            cy.get('[data-qa="16577853554320"] > .tariff-details-item > app-metib-progress-bar > .metib-progress-bar__background').should('be.visible').and('have.css', 'background-color', 'rgb(196, 196, 196)')
            cy.get('[data-qa="16577853554320"] > .tariff-details-item > .tariff-details-item__info-wrapper > .tariff-details-item__info').should('be.visible')
            cy.get('[data-qa="16577853554320"] > .tariff-details-item > .tariff-details-item__progress-wrapper > span').should('contain', '0')

            cy.get('[data-qa="16577853554321"] > .tariff-details-item > :nth-child(1) > .tariff-details-item__header').should('contain', 'Счет')
            cy.get('[data-qa="16577853554321"] > .tariff-details-item > :nth-child(1) > .tariff-details-item__header > span').should('contain', '  Расчетный счет 40802810200990000023 ').and('have.css', 'background-image', 'linear-gradient(270deg, rgb(0, 58, 210) 0%, rgb(0, 58, 210) 100%)')
            cy.get('[data-qa="16577853554321"] > .tariff-details-item > .tariff-details-item__option-wrapper > .tariff-details-item__option-description').should('contain', 'Переводы на счета физических лиц')
            cy.get('[data-qa="16577853554321"] > .tariff-details-item > :nth-child(3) > .tariff-details-item__header').should('contain', ' 0.2% ')
            cy.get('[data-qa="16577853554321"] > .tariff-details-item > app-metib-progress-bar > .metib-progress-bar__background').should('be.visible').and('have.css', 'background-color', 'rgb(196, 196, 196)')
            cy.get('[data-qa="16577853554321"] > .tariff-details-item > .tariff-details-item__info-wrapper > .tariff-details-item__info').should('be.visible')
            cy.get('[data-qa="16577853554321"] > .tariff-details-item > .tariff-details-item__progress-wrapper > span').should('contain', ' 0.00 из 99 999,99 ₽ ')
        })
        it.only('Верстка тарифы', () => {
            cy.get('.page-path > :nth-child(2) > .ng-star-inserted').should('contain','Тарифы и пакеты')
            cy.get('.page-title__text').should('contain','Тарифы и пакеты')
            cy.get('[data-qa="16577869259230"]').should('contain','Тарифы').and('have.class','active')
            // .and('have.css','border-bottom','3px solid #2f54eb')
            cy.get('[data-qa="16577864014650"] > [data-qa="1657784328292"] > [data-qa="1657787397864"] > [data-qa="16577841166640"] > .card-content-item > .label').should('contain','Переводы в другие банки на счета ЮЛ, ИП и ФЛ ')
            cy.get('[data-qa="16577864014650"] > [data-qa="1657784328292"] > [data-qa="1657787397864"] > [data-qa="16577841166640"] > .card-content-item > .value').should('contain','20 шт. бесплатно, далее 25 ₽ за платеж. В адрес ФЛ + доп.комиссия')
            cy.get('[data-qa="16577864014650"] > [data-qa="1657784328292"] > [data-qa="1657787397864"] > [data-qa="16577841166641"] > .card-content-item > .label').should('contain','Переводы в адрес ФЛ')
            cy.get('[data-qa="16577864014650"] > [data-qa="1657784328292"] > [data-qa="1657787397864"] > [data-qa="16577841166641"] > .card-content-item > .value').should('contain','от 0,5% до 6% от суммы платежа')
            cy.get('[data-qa="16577864014650"] > [data-qa="1657784328292"] > [data-qa="1657787397864"] > [data-qa="16577841166642"] > .card-content-item > .label').should('contain','Снятие наличных с карты')
            cy.get('[data-qa="16577864014650"] > [data-qa="1657784328292"] > [data-qa="1657787397864"] > [data-qa="16577841166642"] > .card-content-item > .value').should('contain','до 100 000 ₽ (включительно) - бесплатно. Далее - 1,5 % ')
            cy.get('[data-qa="16577864014650"] > [data-qa="1657784328292"] > [data-qa="1657787397864"] > [data-qa="16577841166643"] > .card-content-item > .label').should('contain','Начисление % на остаток')
            cy.get('[data-qa="16577864014650"] > [data-qa="1657784328292"] > [data-qa="1657787397864"] > [data-qa="16577841166643"] > .card-content-item > .value').should('contain','не начисляется')
            
            cy.get('[data-qa="16577864014650"] > [data-qa="1657784328292"] > [data-qa="1657784323208"] > [data-qa="1657784081149"] > [data-qa="16577845753970"] > .card-content-item > .label').should('contain','')
            cy.get('[data-qa="16577864014650"] > [data-qa="1657784328292"] > [data-qa="1657784323208"] > [data-qa="1657784081149"] > [data-qa="16577845753970"] > .card-content-item > .value').should('contain','')
            cy.get('[data-qa="16577864014650"] > [data-qa="1657784328292"] > [data-qa="1657784323208"] > [data-qa="1657784081149"] > [data-qa="16577845753971"] > .card-content-item > .label').should('contain','')
            cy.get('[data-qa="16577864014650"] > [data-qa="1657784328292"] > [data-qa="1657784323208"] > [data-qa="1657784081149"] > [data-qa="16577845753971"] > .card-content-item > .value').should('contain','')
            cy.get('[data-qa="16577864014650"] > [data-qa="1657784328292"] > [data-qa="1657784323208"] > [data-qa="1657784081149"] > [data-qa="1657784614268"]').should('contain','')
            cy.get('[data-qa="16577864014650"] > [data-qa="1657784328292"] > [data-qa="1657784323208"] > [data-qa="1657784081149"] > [data-qa="1657784607021"] > [data-qa="1663074395452"] > span > i').should('contain','').should('contain','')

        })
    })
})

